<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <!--<link rel="icon" href="./favicon/.png" type="image/png">-->
    <title>Guld presentation</title>
   
   <!-- <link href="./css/style.css" rel="stylesheet" type="text/css" media="screen" />-->


    <script src="./libs/jquery-3.2.1.min.js"></script>
    <script src="./libs/aframe5.js"></script>
    <script src="./libs/aframe-animation-component.min.js"></script>
    <script src="./libs/aframe-extras.min.js"></script>
    <script src="./libs/hammer.js"></script>
   
    <script src="./libs/aframe-gif-shader.min.js"></script>
    <script src="./libs/aframe-gif-component.min.js"></script>
   
    
</head>

<body>



    <!-- ***** A-SCENE *****-->

    <a-scene  antialias="true" fog="type: exponential; density:0.02; color:#AAA" vr-mode-ui="enabled: false" id="aframe_scene">
        <!-- ****ASSETS**** -->
        <a-assets>
        <img id="disMap" src="./maps/rockDisMap2.png"> </img>
        <img id="disMap2" src="./maps/rockDisMap3.png"> </img>
        <img id="disMap3" src="./maps/rockDisMap4.png"> </img>
        <a-asset-item id="ground-obj" src="models/ground/ground.obj" ></a-asset-item>
    <a-asset-item id="ground-mtl" src="models/ground/ground.mtl"></a-asset-item>
   <a-asset-item id="ceiling-obj" src="models/ceiling/ceiling.obj" ></a-asset-item>
    <a-asset-item id="ceiling-mtl" src="models/ceiling/ceiling.mtl"></a-asset-item>

        </a-assets>

        <!--****LIGHTS****-->

        <a-light type="ambient" intensity="0.90" color="#fff"></a-light>
        <a-light type="point" intensity="0.15" position="0 12 -20"></a-light>



        <!-- ****ENVIRONMENT****-->
   <a-entity obj-model="obj: #ground-obj; mtl: #ground-mtl" scale="15 5 15"></a-entity>
   <a-entity obj-model="obj: #ceiling-obj; mtl: #ceiling-mtl" scale="15 5 15"></a-entity>
       <!-- <a-plane  src="./textures/rock1.jpg" id="ground" rotation="-90 0 0"  displacement-map="#disMap3" displacement-scale="1" displacement-bias="0.5" roughness="1" position="0 -0.2 0" height="200" width="200" repeat="1" color="#444" ></a-plane>-->
<!--              
        <a-entity id="extWalls">
            <a-box position="100 3 0" height="6" width="80" depth="0.2" rotation="0 90 0"></a-box>
            <a-box position="-100 3 0" height="6" width="80" depth="0.2" rotation="0 90 0"></a-box>
            <a-box position="0 3 -40" height="6" width="200" depth="0.2" rotation="0 0 0"></a-box>
            <a-box position="50 3 40" height="6" width="98" depth="0.2" rotation="0 0 0"></a-box>
            <a-box position="-50 3 40" height="6" width="98" depth="0.2" rotation="0 0 0"></a-box>
        </a-entity>
-->
        <a-sky theta-length="90" color="#222"  radius="100" shader="standard" src="./textures/rock1.jpg"></a-sky>
<!--<a-plane id="ceiling" rotation="90 90 0" displacement-map="#disMap2" displacement-scale="2" position="0 42.2 0" height="200" width="200" src="./textures/rock1.jpg" repeat="1" color="#444"></a-plane>-->
        <!-- ****CAMERAS**** -->
        <a-camera id="camera" position="0 4 20" rotation="0 0 0 " fov="80" near="0.1" wasd-controls ></a-camera>
            <!--
 <a-entity id="cursor" cursor="fuse: true; fuseTimeout: 400"
    position="0 0 -3"

    geometry="primitive: sphere; radius: 0.01;"
    material="color: #aa0404; shader: flat"
    raycaster="far: 2000; interval: 300; "
    power="false">

  </a-entity>
  -->


        <!-- ****OBJECTS****  -->
      
      <a-image rotation="0 0 0" position="0 8 -20" height="9" width="16" color="#FFF"> 

      </a-image>


    </a-scene>


</body>

 <script type="text/javascript">
 $(document).ready(function(){


var sceneEl = document.querySelector('a-scene');
   var scene = sceneEl.object3D;

   var cameraEl = document.querySelector('a-camera');
   var camera = cameraEl.object3D;

  /* var groundEl = document.querySelector('#ground');
   var ground = groundEl.object3D;
   console.log(groundEl)

var texture = new THREE.TextureLoader().load( "./maps/rockDisMap3.png" );
texture.wrapS = THREE.RepeatWrapping;
texture.wrapT = THREE.RepeatWrapping;
texture.repeat.set( 4, 4 );
   ground.children[0].material.bumpMap= texture;
   console.log(ground)*/


   function costrainMovement(){
    var camX = camera.position.x;
    var camZ = camera.position.z;
    // 50 radius 
 //console.log("x : "+ camX+" z : "+camZ)
// console.log(Math.abs(camX)+Math.abs(camZ))
    if (Math.abs(camX)+Math.abs(camZ)>50){
              console.log("yeah")

      if(camX>0&&camZ>0){
        console.log("yeah")
      cameraEl.setAttribute("position", {x: camX-1, z: camZ-1})
      //camera.position.x -= 1
      //camera.position.z -= 1
      } else if(camX>0&&camZ<=0){

      camera.position.x -= 1
      camera.position.z += 1
      } else if(camX<=0&&camZ<=0){
      camera.position.x += 1
      camera.position.z += 1
      } else if(camX<=0&&camZ>0){
      camera.position.x += 1
      camera.position.z -= 1
      }
    }
    requestAnimationFrame(costrainMovement);
   }

costrainMovement();

 })
   
 </script>
</html>
